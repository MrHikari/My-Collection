## React组件之间的数据交流

**React** 的**视图**会随着*数据*的变化而变化。

”组件间通信“----**React**数据流解决方案

### 基于 props 的单向数据流

组件，从概念上类似于JavaScript函数。它接受任意的入参（即”props“），并返回类似于描述页面展示内容的React元素。

#### 单向数据流

当前组件的state以props的形式流动时，只能流向组件中比自己层级更低的组件。

---

父--子 间通信

React的数据流是单向的，父组件可以直接将 this.props 传入子组件，实现 父--子 间通信。

---

子--父 间通信

父组件传递给子组件的是一个绑定了自身上下文的函数，子组件在调用该函数时，就可以将想要交给父组件的数据以函数入参的形式给出去。

---

兄弟组件通信

1. 1号子组件与父组件 先实现 子--父 间通信
2. 父组件与 2号子组件 实现 父--子 间通信

从而实现 兄弟组件 之间 通信。

#### 不推荐用props解决的场景需求

不推荐使用props进行多层级嵌套组件之间的数据交流，会增加代码量，维护成本，并且污染中间层组件的属性。

### 利用 ”发布-订阅“ 模式驱动数据流

#### 理解时间的 发布-订阅 机制

例如原生js
```js
target.addEventListener(type, listener, useCapture);
el.addEventListener("click", func, false);
```

优点：监听事件的位置和触发事件的位置是不受限制的

#### 发布-订阅 模型 API 设计思路

事件的监听（订阅）和 

on(): 负责注册事件的监听器，指定事件触发时的回调函数

emit(): 负责触发事件，可以通过传参使其在触发的时候携带数据

off(): 负责监听器的删除

### 使用 Context API 维护全局状态

Context API 是 React 官方提供的一种组件树全局通信的方式

以 v16.3.0 为分界线，之前的版本存在种种局限性，并不被官方提倡使用。后续版本得到官方的改进，具备更强的可用性。


### 第三方数据流框架 Redux

Redux 是 JavaScript 状态容器，它提供可预测的状态管理。

#### Redux 如何帮助 React 管理数据

* store 是一个单一的数据源，而且是只读的
* action 是对变化的描述
* reducer 负责对变化进行分发和处理

在 Redux 的整个工作过程中,数据流是严格单向的